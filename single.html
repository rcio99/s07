<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />
        <link href="style.css" rel="stylesheet" />
        <title>Introducción a la programación para el Diseño de interacción &#129302;</title>
    </head>
    <body class="bg-dark bg-gradient" style="--bs-bg-opacity: 0.9;">
        <header class="container border-bottom border-secondary">
            <div class="row">
                <div class="col">
                    <h1 class="pt-3 pb-1 fs-5 d-flex justify-content-between align-items-center">
                        <span>
                            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                                <g id="line">
                                  <polygon fill="#d8b365" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" points="47.4182,21.2818 38.115,43.3694 30.5525,40.1841 22.5561,52.7975 25.8947,55.0008 31.8997,45.2613 36.5504,47.0839 40.2368,48.6366 51.1045,22.8344"/>
                                  <rect x="12.0515" y="12.0154" width="47.897" height="47.8969" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="50.0686" x2="59.8051" y1="36.085" y2="36.085" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="12.739" x2="37.1791" y1="36.085" y2="36.085" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="45.0242" x2="59.6829" y1="47.9928" y2="47.9928" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="12.739" x2="20.8186" y1="47.9928" y2="47.9928" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="48.1334" x2="48.2509" y1="40.4444" y2="59.3704" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="48.033" x2="48.0367" y1="12.0588" y2="17.1816" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="36.1837" x2="36.1837" y1="51.6503" y2="59.5732" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="36.1837" x2="36.1837" y1="12.3297" y2="37.8307" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="24.2253" x2="24.2253" y1="58.6134" y2="59.5732" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="24.2253" x2="24.2253" y1="11.963" y2="43.0994" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="55.1837" x2="59.2261" y1="24.1772" y2="24.1772" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                  <line x1="12.2635" x2="41.7514" y1="24.1772" y2="24.1772" fill="#5ab4ac" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                </g>
                              </svg>
                            mindicador.cl
                        </span>
                        <span>indicadores económicos</span>
                    </h1>
                </div>
            </div>
        </header>
        <main class="container">
            <section class="row">
                <div class="col py-5">
                    <p>
                        <a href="index.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z" />
                            </svg>
                            Volver
                        </a>
                    </p>
                    <canvas id="grafico" width="300" height="100"></canvas>
                </div>
            </section>
        </main>
        <footer class="container fixed-bottom border-top border-secondary">
            <div class="row">
                <div class="col pt-3">
                    <p class="d-flex justify-content-between align-items-center small"><a href="https://rcio99.github.io/">Rocío Córdova</a> <a href="https://rcio99.github.io/s07/">s07</a></p>
                </div>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <script>
            var codigo = new URLSearchParams(window.location.search).get("cod");
            fetch("https://mindicador.cl/api/" + codigo)
                .then((response) => response.json())
                .then((consulta) => {
                    console.log(consulta.serie);
                    let nombre = consulta.nombre;
                    let labels = [];
                    let data = [];
                    consulta.serie.forEach((i) => {
                        labels.push(i.fecha.split("T")[0]);
                        data.push(i.valor);
                    });
                    labels.reverse();
                    data.reverse();
                    new Chart(document.getElementById("grafico"), {
                        type: "line",
                        data: {
                            labels: labels,
                            datasets: [
                                {
                                    label: nombre,
                                    data: data,
                                    backgroundColor: "#5ab4ac .15",
                                    borderColor: "#5ab4ac",
                                    pointBorderColor: "#d8b365",
                                    borderWidth: 2,
                                    tension: 1,
                                    
                                },
                            ],
                        },
                        options: {
                            scales: {
                                yAxes: [
                                    {
                                        ticks: {
                                            beginAtZero: false,
                                        },
                                    },
                                ],
                            },
                        },
                    });
                })
                .catch((error) => console.log("Algo está mal.", error));
        </script>
    </body>
</html>
